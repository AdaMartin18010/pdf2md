# PDF转Markdown GUI功能总结

## 当前实现的功能

### 1. 转换选项卡

- ✅ **输入/输出目录选择**: 支持浏览选择目录
- ✅ **转换选项设置**:
  - 语言选择 (ch/en)
  - 后端选择 (pipeline)
  - 解析方法 (auto/ocr/layout)
  - 公式解析开关
  - 表格解析开关
  - **处理设备选择** (auto/cpu/gpu) - 新增功能
- ✅ **控制按钮**: 开始转换、停止转换、检查缓存
- ✅ **进度显示**: 进度条和状态更新

### 2. 设置选项卡

- ✅ **缓存设置**: 缓存目录、自动预加载
- ✅ **处理设置**:
  - 超时时间设置
  - **处理设备设置** (auto/cpu/gpu)
  - 最大并发数
  - 内存限制
  - 高级选项 (性能优化、处理缓存、失败重试、详细日志)
- ✅ **界面设置**: 进度显示、语言、主题
- ✅ **配置保存/重置**: 支持配置的保存和重置

### 3. 缓存管理选项卡

- ✅ **缓存信息显示**: 详细显示缓存状态
- ✅ **缓存操作**: 刷新信息、预加载模型、清理缓存

### 4. 处理状态选项卡

- ✅ **状态概览**: 当前状态、处理设备、内存使用
- ✅ **任务列表**: 显示处理任务和进度
- ✅ **处理统计**: 总文件数、成功/失败数、平均耗时

### 5. 日志选项卡

- ✅ **日志显示**: 实时显示处理日志
- ✅ **日志操作**: 清空日志、保存日志

## CPU/GPU设备选择功能

### 功能位置

1. **转换选项卡**: 在转换选项中直接选择处理设备
2. **设置选项卡**: 在处理设置中配置默认设备

### 设备选项说明

- **auto**: 自动选择 - 系统根据可用资源自动选择CPU或GPU
- **cpu**: 强制CPU - 强制使用CPU进行处理
- **gpu**: 强制GPU - 强制使用GPU进行处理

### 使用方法

1. 在转换选项卡的"转换选项"部分，找到"处理设备"下拉框
2. 选择所需的处理设备 (auto/cpu/gpu)
3. 点击"开始转换"按钮
4. 系统将使用选择的设备进行PDF转换

### 配置保存

- 设备选择会自动保存到配置文件
- 下次启动时会自动加载上次的设备设置
- 可以在设置选项卡中修改默认设备设置

## 测试脚本

### 可用的测试脚本

1. `test_gui_complete.py` - 完整GUI功能测试
2. `test_main_gui.py` - 简化版GUI测试
3. `test_device_options.py` - 设备选项测试
4. `diagnose_gui.py` - GUI诊断工具

### 运行测试

```bash
# 测试设备选项
python test_device_options.py

# 测试完整GUI功能
python test_gui_complete.py

# 运行简化版GUI
python test_main_gui.py

# 诊断GUI问题
python diagnose_gui.py
```

## 启动GUI

### 主GUI

```bash
python pdf2md_gui.py
```

### 简化版GUI

```bash
python test_main_gui.py
```

## 功能状态

### 已实现功能

- ✅ 文件/目录选择
- ✅ 转换选项配置
- ✅ **CPU/GPU设备选择**
- ✅ 进度显示
- ✅ 日志记录
- ✅ 配置保存/加载
- ✅ 缓存管理
- ✅ 处理状态监控
- ✅ 主题和语言切换

### 待完善功能

- 🔄 邮件报告功能
- 🔄 自动关机功能
- 🔄 断点续转功能
- 🔄 批量处理优化

## 使用建议

1. **首次使用**: 建议先运行 `python diagnose_gui.py` 检查环境
2. **设备选择**: 根据您的硬件配置选择合适的处理设备
3. **缓存管理**: 首次使用建议先预加载模型
4. **配置保存**: 设置完成后记得保存配置

## 注意事项

1. GPU模式需要确保已安装CUDA和相关驱动
2. 首次使用会自动下载模型文件，请确保网络连接正常
3. 大文件处理时建议使用GPU模式以获得更好的性能
4. 内存不足时建议使用CPU模式
